from google import genai
import os

client = genai.Client(api_key="AIzaSyAl_bK7SZR2-TZXHiJi8X7v-6cNnaMev-Y")

# Load combined markdown from Adrien's Documents folder
combined_markdown_path = os.path.expanduser("~/Documents/combined_markdown.txt")
with open(combined_markdown_path, "r", encoding="utf-8") as f:
    combined_markdown = f.read()

# Build the prompt with extraction instructions
prompt = f"""
Vous êtes un assistant d'extraction de contacts depuis un document Markdown généré pour un site web donné.
Votre tâche : parcourir le texte fourni et retourner un objet JSON unique avec :
- social_links : liste des URLs des profils officiels de réseaux sociaux du site cible (LinkedIn, Instagram, Facebook, Twitter, YouTube, etc.), sans doublons.
- emails : liste des adresses e-mail de contact principales du site (sans doublons).
- website : URL principale (domaine racine) du site analysé, unique.
- addresses : liste des adresses postales de contact (sans doublons).
- phone_numbers : liste des numéros de téléphone de contact (sans doublons).

N’incluez que les liens et informations appartenant au site analysé. Excluez tout lien ou référence vers des tiers non pertinents ou des entreprises externes.

Contenu du document Markdown :
```markdown
{combined_markdown}
```
"""

response = client.models.generate_content(
    model="gemini-2.0-flash",
    contents=prompt
)
print(response.text)